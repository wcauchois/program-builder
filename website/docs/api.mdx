---
id: api
title: API Reference
sidebar_label: API Reference
---

export const C = ({ children }) => React.createElement('code', { children });

export const ParamList = ({ title, items }) => (
  <>
    <p>
      <strong>{title || 'Parameters'}:</strong>
    </p>
    <ul>
      {items.map(([first, second]) => (
        <li><C>{first}</C> - {second}</li>
      ))}
    </ul>
  </>
);

export const CommonFlagParams = ({ defaultType, forFlag }) => (
  <>
    <ParamList items={[
      ['name: string', <>
        The name for the flag, including any leading dashes. Multiple alternative
        names may be separated by commas, like <C>'-c, --count'</C>.
      </>],
      ['options: object', `See below.`]
    ]} />
    <ParamList title="Options" items={[
      ['dest: string', `The destination key into which to store this value.`],
      ['description: string | undefined', `A description of the flag for help text generation.`],
      !forFlag ? [`default: ${defaultType} | undefined`, `A default value. If omitted, the flag is considered optional.`] : undefined,
      ['metavar: string | undefined', `A metavariable that will be used in the help text.`]
    ].filter(x => x)} />
  </>
);

export const ArgParams = () => (
  <>
    <ParamList items={[
      ['dest: string', `The destination key into which this argument will be stored.`],
      ['options: object', `See below.`]
    ]} />
    <ParamList title="Options" items={[
      ['description: string | undefined', `A description of the argument for help text generation.`],
      ['metavar: string | undefined', `A metavariable that will be used in the help text.`]
    ]} />
  </>
);

# `ProgramBuilder`

This class provides a fluent interface to specify arguments and flags related
to a commandline program. Create a ProgramBuilder by calling `ProgramBuilder.newBuilder()`.
After configuring it as desired, call `.build()` to return a `Program` object,
which you can then call `.exec()` on to execute your main function.

```typescript
const program = ProgramBuilder.newBuilder()
  // call other methods
  .build();

program.exec(args => {
  // access arguments as desired
});
```

## `arg(dest, options)`

Add a required positional argument to the program.

<ArgParams />

## `optionalArg(dest, options)`

Add an optional positional argument to the program.

<ArgParams />

## `description(newDescription)`

Sets the description for the program, which will be displayed when the user
invokes the program with a help argument (`-h`, `--help`).

<ParamList items={[
  ['newDescription: string', 'The new description for the program.']
]} />

## `flag(name, options)`

Adds a flag to the program.

<CommonFlagParams forFlag={true} />

## `stringFlag(name, options)`

Adds a string-valued flag to the program.

<CommonFlagParams />

## `intFlag(name, options)`

Adds an integer-valued flag to the program.

<CommonFlagParams />

## `floatFlag(name, options)`

Adds a float-valued flag to the program.

<CommonFlagParams />
